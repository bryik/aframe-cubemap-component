!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");AFRAME.registerComponent("cubemap",{schema:{folder:{type:"string"},edgeLength:{type:"int",default:5e3},ext:{type:"string",default:"jpg"}},init:function(){const e=this.el,t=this.data;this.geometry=new THREE.BoxBufferGeometry(1,1,1);const n=THREE.ShaderLib.cube;this.material=new THREE.ShaderMaterial({fragmentShader:n.fragmentShader,vertexShader:n.vertexShader,uniforms:n.uniforms,depthWrite:!1,side:THREE.BackSide}).clone(),Object.defineProperty(this.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),this.material.uniforms.envMap.value=new THREE.Texture,this.loader=new THREE.CubeTextureLoader,this.mesh=new THREE.Mesh(this.geometry,this.material),this.mesh.scale.set(t.edgeLength,t.edgeLength,t.edgeLength),e.setObject3D("cubemap",this.mesh)},update:function(e){const t=this.el,n=this.data,r=t.sceneEl.systems.renderer;if(n.edgeLength!==e.edgeLength&&this.mesh.scale.set(n.edgeLength,n.edgeLength,n.edgeLength),n.ext!==e.ext||n.folder!==e.folder){let e;const o=n.folder;if(o&&"#"===o[0]){const t=document.querySelector(o);if(null===t)return void console.error("cubemap component given a selector to a non-existent asset:",o);e=t.srcs}else this.loader.setPath(o),e=["posx","negx","posy","negy","posz","negz"],e=e.map((function(e){return e+"."+n.ext}));this.loader.load(e,function(e){if(o!==this.data.folder)return void e.dispose();r.applyColorCorrection(e);const n=this.material.uniforms.envMap.value;this.material.uniforms.envMap.value=e,n&&n.dispose();t.emit("cubemapLoaded")}.bind(this))}},remove:function(){this.geometry.dispose(),this.material.uniforms.envMap.value.dispose(),this.material.dispose(),this.el.removeObject3D("cubemap")}})}]);